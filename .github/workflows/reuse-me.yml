name: Reusable Workflow - Post Github Comment

on:
  workflow_call:
    secrets:
      GITHUB_TOKEN:
      
    inputs:
      url:
        required: true
        type: string
      comment:
        required: true
        type: string


jobs:
  job1:
    runs-on: self-hosted
    steps:
      - name: Add comment to github
        env:
          URL: ${{ inputs.url }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          COMMENT: ${{ inputs.comment }}
        run: |
          echo "token: $GITHUB_TOKEN url: $URL comment: $COMMENT"
          curl \
            -H "Content-Type: application/json" \
            -H "Authorization: token $GITHUB_TOKEN" \
            -d "$COMMENT" \
            -X POST \
            $URL